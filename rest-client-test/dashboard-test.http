@baseUrl = http://localhost:3000/api
@token_admin = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkBjcm0uY29tIiwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOiJBRE1JTiIsImlhdCI6MTc1NDMyMzEyMywiZXhwIjoxNzU0NDA5NTIzfQ.lTnxT0jWQVmdrJaD5SwtWNyu0XcB3a1Du5m9W_sKjQ4
@token_manager = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NywiZW1haWwiOiJtYW5hZ2VyQGNybS5jb20iLCJ1c2VybmFtZSI6Im1hbmFnZXIiLCJyb2xlIjoiTUFOQUdFUiIsImlhdCI6MTc1NDIzNDkwOCwiZXhwIjoxNzU0MzIxMzA4fQ.6HXAOobpMoLkpIxGNTBju2QvQjkJUYBi-2aiieEfBJc
@token_sales = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiZW1haWwiOiJzYWxlczFAY3JtLmNvbSIsInVzZXJuYW1lIjoic2FsZXMxIiwicm9sZSI6IlNBTEVTIiwiaWF0IjoxNzU0MzIzMTc3LCJleHAiOjE3NTQ0MDk1Nzd9._FGMBeM7KNhykUHjWSyZ5YNyKPVsPw0tPPlhEa60mRQ
@token_viewer = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTAsImVtYWlsIjoidmlld2VyQGNybS5jb20iLCJ1c2VybmFtZSI6InZpZXdlciIsInJvbGUiOiJWSUVXRVIiLCJpYXQiOjE3NTQyMzQ5NDcsImV4cCI6MTc1NDMyMTM0N30.Gno22KsUgqOcC1TXZOKg73-lXhU-RpTI2A8zYjvuNgA

### ----------------------------------------------------------------

### [SUCCESS] Sales user gets their own dashboard
# The service should create a default dashboard if it doesn't exist.
GET {{baseUrl}}/dashboard
Authorization: Bearer {{token_admin}}

### ----------------------------------------------------------------

### [SUCCESS] Manager gets their own dashboard
GET {{baseUrl}}/dashboard
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Sales user updates their dashboard with valid data
PATCH {{baseUrl}}/dashboard
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
    "name": "My Personal Sales Tracker",
    "description": "Tracking my weekly progress and key opportunities.",
    "layout": {
        "widgets": [
            { "id": "key_opportunities", "type": "list" },
            { "id": "weekly_sales", "type": "chart" }
        ]
    }
}

### ----------------------------------------------------------------

### [FAIL] Sales user tries to update dashboard with invalid data (missing name)
PATCH {{baseUrl}}/dashboard
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
    "description": "This update will fail.",
    "layout": { "widgets": [] }
}

### ----------------------------------------------------------------

### [FAIL] Sales user tries to update dashboard with invalid data (layout is not an object)
PATCH {{baseUrl}}/dashboard
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
    "name": "Another Failed Update",
    "layout": "a string instead of an object"
}

### ----------------------------------------------------------------

### [FAIL] A user that is not logged in (no token) tries to get the dashboard
GET {{baseUrl}}/dashboard

### ----------------------------------------------------------------

### [FAIL] A user that is not logged in (no token) tries to update the dashboard
PATCH {{baseUrl}}/dashboard
Content-Type: application/json

{
    "name": "Failed Update",
    "layout": {}
}

### ----------------------------------------------------------------