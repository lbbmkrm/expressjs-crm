@baseUrl = http://localhost:3000
### --- Token User: ADMIN ---
@token_admin = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkBleGFtcGxlLmNvbSIsInVzZXJuYW1lIjoiYWRtaW51c2VyIiwicm9sZSI6IkFETUlOIiwiaWF0IjoxNzUzNzgyNTAyLCJleHAiOjE3NTM4Njg5MDJ9.cmFwhq2QAf1S3NKcHxPHB0m9Z4tK8iDXvTurgpwNACQ

### --- Token User: SALES (ID: 2) ---
@token_sales = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwiZW1haWwiOiJzYWxlc0BleGFtcGxlLmNvbSIsInVzZXJuYW1lIjoic2FsZXN1c2VyIiwicm9sZSI6IlNBTEVTIiwiaWF0IjoxNzUzNzgyNTM5LCJleHAiOjE3NTM4Njg5Mzl9.x8zMzqNmkUiQb2ljGqZYyvwRtI9fNF2PVV6OKGFI2Og
@token_sales2 = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiZW1haWwiOiJzYWxlczJAZXhhbXBsZS5jb20iLCJ1c2VybmFtZSI6InNhbGVzMnVzZXIiLCJyb2xlIjoiU0FMRVMiLCJpYXQiOjE3NTM3ODI1NjcsImV4cCI6MTc1Mzg2ODk2N30.aP2uRbxrSwtX7dehCUzIhgg1mT9Acm5kflvNQF5ouLs

### --- Token User: MANAGER (ID: 3) ---
@token_manager = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwiZW1haWwiOiJtYW5hZ2VyQGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJtYW5hZ2VydXNlciIsInJvbGUiOiJNQU5BR0VSIiwiaWF0IjoxNzUzNzgyNjAxLCJleHAiOjE3NTM4NjkwMDF9.CZ1Xhq3Oxp1ahnHuMcGlfubLJemuTS5QFkclRmDQjho

### --- Token User: VIEWER (ID: 4) ---
@token_viewer = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJ2aWV3ZXJAZXhhbXBsZS5jb20iLCJ1c2VybmFtZSI6InZpZXdlcnVzZXIiLCJyb2xlIjoiVklFV0VSIiwiaWF0IjoxNzUzNzgyNjMwLCJleHAiOjE3NTM4NjkwMzB9.qy-GSJ1gz5FS2xoxctWvEh78EmIqJ45iFcnvzKPDo40


### Membuat tugas baru (kasus sukses, tanpa customerId, leadId, atau opportunityId)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "name": "Follow up with client",
  "description": "Schedule a call to discuss project requirements",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "HIGH",
  "assignedToUserId": 2
}

### Membuat tugas baru (kasus sukses, dengan customerId)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "name": "Customer onboarding",
  "description": "Assist customer with initial setup",
  "dueDate": "2025-08-15T00:00:00Z",
  "priority": "MEDIUM",
  "assignedToUserId": 3,
  "customerId": 1
}

### Membuat tugas baru (kasus sukses, dengan leadId)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "name": "Lead follow-up",
  "description": "Follow up on lead from marketing campaign",
  "dueDate": "2025-08-10T00:00:00Z",
  "priority": "HIGH",
  "assignedToUserId": 3,
  "leadId": 4
}

### Membuat tugas baru (kasus sukses, dengan opportunityId)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "name": "Opportunity negotiation",
  "description": "Negotiate terms for opportunity",
  "dueDate": "2025-09-01T00:00:00Z",
  "priority": "HIGH",
  "assignedToUserId": 2,
  "opportunityId": 2
}

### Menguji assignedToUserId tidak valid (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Invalid User Task",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 999
}

### Menguji customerId tidak valid (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Invalid Customer Task",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 3,
  "customerId": 999
}

### Menguji leadId tidak valid (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Invalid Lead Task",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 2,
  "leadId": 999
}

### Menguji opportunityId tidak valid (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Invalid Opportunity Task",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 3,
  "opportunityId": 999
}

### Menguji dueDate di masa lalu (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Past Due Task",
  "dueDate": "2024-01-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 3
}

### Menguji multiple errors (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Short",
  "dueDate": "invalid-date",
  "priority": "LOW",
  "assignedToUserId": "not-a-number",
  "customerId": 999,
  "leadId": 999,
  "opportunityId": 999
}

### Menguji tanpa token (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json

{
  "name": "Missing Token Task",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 2
}

### Menguji token tidak valid (harus gagal)
POST {{baseUrl}}/api/tasks
Content-Type: application/json
Authorization: Bearer invalid-token

{
  "name": "Invalid Token Task",
  "dueDate": "2025-08-01T00:00:00Z",
  "priority": "LOW",
  "assignedToUserId": 2
}

### Mendapatkan semua tugas
GET {{baseUrl}}/api/tasks
Authorization: Bearer {{token_admin}}

### Mendapatkan tugas berdasarkan ID (kasus sukses)
GET {{baseUrl}}/api/tasks/2
Authorization: Bearer {{token_sales}}

### Mendapatkan tugas dengan ID tidak valid (harus gagal)
GET {{baseUrl}}/api/tasks/999
Authorization: Bearer {{token_admin}}

### Mendapatkan tugas berdasarkan status (kasus sukses)
GET {{baseUrl}}/api/tasks/status/PENDING
Authorization: Bearer {{token_admin}}

### Mendapatkan tugas berdasarkan status tidak valid (harus gagal)
GET {{baseUrl}}/api/tasks/status/INVALID_STATUS
Authorization: Bearer {{token_admin}}

### Mendapatkan tugas berdasarkan prioritas (kasus sukses)
GET {{baseUrl}}/api/tasks/priority/HIGH
Authorization: Bearer {{token_admin}}

### Mendapatkan tugas berdasarkan prioritas tidak valid (harus gagal)
GET {{baseUrl}}/api/tasks/priority/NOT_VALID
Authorization: Bearer {{token_admin}}

### Mendapatkan tugas berdasarkan pengguna yang ditugaskan
GET {{baseUrl}}/api/tasks/assigned/3
Authorization: Bearer {{token_admin}}

### Memperbarui tugas (kasus sukses, ubah status ke COMPLETED)
PATCH {{baseUrl}}/api/tasks/2
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "status": "COMPLETED"
}

### Memperbarui tugas (kasus sukses, ubah beberapa field)
PATCH {{baseUrl}}/api/tasks/3
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Updated Task Name",
  "description": "Updated description for the task",
  "dueDate": "2025-09-01T00:00:00Z",
  "priority": "MEDIUM",
  "customerId": 3
}

### Memperbarui tugas (kasus sukses, hapus customerId)
PATCH {{baseUrl}}/api/tasks/3
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "customerId": null
}

### Menguji pembaruan dengan multiple errors (harus gagal)
PATCH {{baseUrl}}/api/tasks/3
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "name": "Short",
  "dueDate": "invalid-date",
  "priority": "INVALID_PRIORITY",
  "customerId": 999,
  "leadId": 999,
  "opportunityId": 999,
  "assignedToUserId": "not-a-number"
}

### Menghapus tugas (kasus sukses)
DELETE {{baseUrl}}/api/tasks/3
Authorization: Bearer {{token_admin}}

### Menghapus tugas dengan ID tidak valid (harus gagal)
DELETE {{baseUrl}}/api/tasks/999
Authorization: Bearer {{token_admin}}