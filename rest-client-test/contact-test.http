@baseUrl = http://localhost:3000/api

# =================================================================
# TOKENS
# =================================================================
@token_admin = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkBjcm0uY29tIiwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOiJBRE1JTiIsImlhdCI6MTc1NDU2MDQ5MSwiZXhwIjoxNzU0NjQ2ODkxfQ.sXZekuDGiHv4_KVqCWM1Hz4bNyAh_bsRjYLIl7VRsfQ
@token_manager = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwiZW1haWwiOiJtYW5hZ2VyQGNybS5jb20iLCJ1c2VybmFtZSI6Im1hbmFnZXIiLCJyb2xlIjoiTUFOQUdFUiIsImlhdCI6MTc1NDU2MDUyNywiZXhwIjoxNzU0NjQ2OTI3fQ.MitFAC5XKFKW-a-Q5UWVEWjYMSO-acMANuNfKs5V1_w
@token_sales = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiZW1haWwiOiJzYWxlczFAY3JtLmNvbSIsInVzZXJuYW1lIjoic2FsZXMxIiwicm9sZSI6IlNBTEVTIiwiaWF0IjoxNzU0NTYwNTg3LCJleHAiOjE3NTQ2NDY5ODd9.2ZN-WQdAFyF_6BybSd31GFpD8FLMXPlLtEU1uZQh1aI
@token_sales2 = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwiZW1haWwiOiJzYWxlczJAY3JtLmNvbSIsInVzZXJuYW1lIjoic2FsZXMyIiwicm9sZSI6IlNBTEVTIiwiaWF0IjoxNzU0NTYwNjA1LCJleHAiOjE3NTQ2NDcwMDV9.WbemKaKO3luLZ_1ldluzfwwmszWq2q2fxL9Z7_gdSho
@token_viewer = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJ2aWV3ZXJAY3JtLmNvbSIsInVzZXJuYW1lIjoidmlld2VyIiwicm9sZSI6IlZJRVdFUiIsImlhdCI6MTc1NDU3NzE3MiwiZXhwIjoxNzU0NjYzNTcyfQ.0RWXzPpemALcQxD6oHUnG7BBSs0WA85ZSPcsOmlEtR0


# =================================================================
# CONTACT CORE ENDPOINTS
# =================================================================

### [SUCCESS] Sales user creates a new contact for a customer
# @name createContact
POST {{baseUrl}}/contacts
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
  "firstName": "Budi",
  "lastName": "Prasetyo",
  "email": "budi.prasetyo@example.com",
  "phone": "081212345678",
  "position": "Technical Lead",
  "customerId": 1
}

### ----------------------------------------------------------------

### [FAIL] Create contact with a non-existent customer ID
POST {{baseUrl}}/contacts
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
  "firstName": "Gagal",
  "lastName": "Kontak",
  "email": "gagal.kontak@example.com",
  "phone": "081299998888",
  "position": "Tester",
  "customerId": 9999
}

### ----------------------------------------------------------------

### [FAIL] Create contact with a duplicate email
POST {{baseUrl}}/contacts
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "firstName": "Budi",
  "lastName": "Prasetyo",
  "email": "budi.prasetyo@example.com",
  "phone": "081211112222",
  "position": "Manager",
  "customerId": 2
}

### ----------------------------------------------------------------

### [SUCCESS] Any authenticated user can get all contacts
GET {{baseUrl}}/contacts
Authorization: Bearer {{token_sales2}}

### ----------------------------------------------------------------

### [SUCCESS] Any authenticated user can get a contact by ID
# Ganti ID sesuai dengan data yang ada
GET {{baseUrl}}/contacts/1
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Sales owner updates their own contact
# Ganti ID dengan contact yang dimiliki oleh token_sales
PATCH {{baseUrl}}/contacts/2
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
  "position": "Senior Technical Lead"
}

### ----------------------------------------------------------------

### [FAIL] Sales user tries to update a contact they don't own
# Ganti ID dengan contact yang TIDAK dimiliki oleh token_sales2
PATCH {{baseUrl}}/contacts/3
Content-Type: application/json
Authorization: Bearer {{token_sales2}}

{
  "phone": "081200000000"
}

### ----------------------------------------------------------------

### [SUCCESS] Admin can update any contact
# Ganti ID contact jika perlu
PATCH {{baseUrl}}/contacts/2
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "firstName": "Siti",
  "lastName": "Aminah (Updated by Admin)"
}

### ----------------------------------------------------------------

### [SUCCESS] Sales owner deletes their own contact
# Ganti ID dengan contact yang dimiliki oleh token_sales
DELETE {{baseUrl}}/contacts/2
Authorization: Bearer {{token_sales}}

### ----------------------------------------------------------------

### [FAIL] Manager tries to delete a contact they don't own
# Ganti ID dengan contact yang TIDAK dimiliki oleh token_manager
DELETE {{baseUrl}}/contacts/3
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Admin can delete any contact
# Ganti ID contact jika perlu
DELETE {{baseUrl}}/contacts/3
Authorization: Bearer {{token_admin}}


# =================================================================
# CONTACT RELATIONSHIP ENDPOINTS
# =================================================================

### [SUCCESS] Get all activities for a specific contact
# Ganti ID dengan contact yang memiliki aktivitas
GET {{baseUrl}}/contacts/1/activities
Authorization: Bearer {{token_admin}}

### ----------------------------------------------------------------

### [SUCCESS] Get all notes for a specific contact
# Ganti ID dengan contact yang memiliki catatan
GET {{baseUrl}}/contacts/4/notes
Authorization: Bearer {{token_admin}}