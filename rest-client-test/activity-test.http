@baseUrl = http://localhost:3000/api

# =================================================================
# TOKENS
# =================================================================
@token_admin = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkBjcm0uY29tIiwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOiJBRE1JTiIsImlhdCI6MTc1NDU2MDQ5MSwiZXhwIjoxNzU0NjQ2ODkxfQ.sXZekuDGiHv4_KVqCWM1Hz4bNyAh_bsRjYLIl7VRsfQ
@token_manager = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwiZW1haWwiOiJtYW5hZ2VyQGNybS5jb20iLCJ1c2VybmFtZSI6Im1hbmFnZXIiLCJyb2xlIjoiTUFOQUdFUiIsImlhdCI6MTc1NDU2MDUyNywiZXhwIjoxNzU0NjQ2OTI3fQ.MitFAC5XKFKW-a-Q5UWVEWjYMSO-acMANuNfKs5V1_w
@token_sales = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiZW1haWwiOiJzYWxlczFAY3JtLmNvbSIsInVzZXJuYW1lIjoic2FsZXMxIiwicm9sZSI6IlNBTEVTIiwiaWF0IjoxNzU0NTYwNTg3LCJleHAiOjE3NTQ2NDY5ODd9.2ZN-WQdAFyF_6BybSd31GFpD8FLMXPlLtEU1uZQh1aI
@token_sales2 = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwiZW1haWwiOiJzYWxlczJAY3JtLmNvbSIsInVzZXJuYW1lIjoic2FsZXMyIiwicm9sZSI6IlNBTEVTIiwiaWF0IjoxNzU0NTYwNjA1LCJleHAiOjE3NTQ2NDcwMDV9.WbemKaKO3luLZ_1ldluzfwwmszWq2q2fxL9Z7_gdSho
@token_viewer = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NSwiZW1haWwiOiJ2aWV3ZXJAY3JtLmNvbSIsInVzZXJuYW1lIjoidmlld2VyIiwicm9sZSI6IlZJRVdFUiIsImlhdCI6MTc1NDU3NzE3MiwiZXhwIjoxNzU0NjYzNTcyfQ.0RWXzPpemALcQxD6oHUnG7BBSs0WA85ZSPcsOmlEtR0


# =================================================================
# ACTIVITY CORE ENDPOINTS
# =================================================================

### [SUCCESS] Sales user creates a new activity for a CUSTOMER
# @name createActivityForCustomer
POST {{baseUrl}}/activities
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
  "type": "MEETING",
  "subject": "Initial project kickoff meeting with Customer",
  "content": "Discussed project timeline and deliverables.",
  "customerId": 1
}

### ----------------------------------------------------------------

### [SUCCESS] Manager creates a new activity for a LEAD
# @name createActivityForLead
POST {{baseUrl}}/activities
Content-Type: application/json
Authorization: Bearer {{token_manager}}

{
  "type": "CALL",
  "subject": "Follow-up call with new lead",
  "content": "Lead is very interested, scheduling a demo.",
  "leadId": 2
}

### ----------------------------------------------------------------

### [FAIL] Create activity with a non-existent RELATION ID
POST {{baseUrl}}/activities
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
  "type": "EMAIL",
  "subject": "This should fail",
  "content": "Customer ID 9999 does not exist.",
  "customerId": 9999
}

### ----------------------------------------------------------------

### [FAIL] Create activity with multiple relation IDs
POST {{baseUrl}}/activities
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "type": "MEETING",
  "subject": "Invalid activity with multiple relations",
  "content": "This should fail.",
  "customerId": 1,
  "leadId": 1
}

### ----------------------------------------------------------------

### [SUCCESS] Get all activities (no filter)
GET {{baseUrl}}/activities
Authorization: Bearer {{token_admin}}

### ----------------------------------------------------------------

### [SUCCESS] Get all activities filtered by type 'CALL'
GET {{baseUrl}}/activities?type=CALL
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Get all activities filtered by type 'MEETING'
GET {{baseUrl}}/activities?type=MEETING
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Get activities for a specific user (My Activities)
GET {{baseUrl}}/activities/my-activities
Authorization: Bearer {{token_sales2}}

### ----------------------------------------------------------------

### [SUCCESS] Get a single activity by ID
# Ganti ID sesuai dengan data yang ada
GET {{baseUrl}}/activities/1
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Sales owner updates their own activity
# Ganti ID dengan activity yang dimiliki oleh token_sales
PATCH {{baseUrl}}/activities/6
Content-Type: application/json
Authorization: Bearer {{token_sales}}

{
  "subject": "(Updated) Initial project kickoff meeting"
}

### ----------------------------------------------------------------

### [FAIL] Sales user tries to update an activity they don't own
# Ganti ID dengan activity yang TIDAK dimiliki oleh token_sales2
PATCH {{baseUrl}}/activities/2
Content-Type: application/json
Authorization: Bearer {{token_sales2}}

{
  "content": "This update attempt should fail."
}

### ----------------------------------------------------------------

### [SUCCESS] Admin can update any activity
# Ganti ID activity jika perlu
PATCH {{baseUrl}}/activities/2
Content-Type: application/json
Authorization: Bearer {{token_admin}}

{
  "content": "(Updated by Admin) Lead is very interested, demo scheduled."
}

### ----------------------------------------------------------------

### [SUCCESS] Sales owner deletes their own activity
# Ganti ID dengan activity yang dimiliki oleh token_sales
DELETE {{baseUrl}}/activities/6
Authorization: Bearer {{token_sales}}

### ----------------------------------------------------------------

### [FAIL] Manager tries to delete an activity they don't own
# Ganti ID dengan activity yang TIDAK dimiliki oleh token_manager
DELETE {{baseUrl}}/activities/3
Authorization: Bearer {{token_manager}}

### ----------------------------------------------------------------

### [SUCCESS] Admin can delete any activity
# Ganti ID activity jika perlu
DELETE {{baseUrl}}/activities/4
Authorization: Bearer {{token_admin}}
